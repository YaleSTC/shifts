<% if @link.errors.empty? %>
  <% if current_user.current_shift %>
    $('#report_links').html("<%= escape_javascript render partial: 'report_links', collection: current_user.current_shift.report.get_links, as: :link %>");
  <% else %>
    $('#dashboard_links').html("<%= escape_javascript render partial: 'dashboard_links' %>");
    $('#links_index').html("<%= escape_javascript render partial: 'links_index' %>");
  <% end %>
  $("#modal").modal('hide');
  $('#flash').html("<%= escape_javascript render partial: 'layouts/flash', locals: {flash: flash} %>");
  <% flash.discard %>
<% else %>
  $('#errors').html("<%= escape_javascript render partial: 'notices/error_messages'%>");
<% end %>
